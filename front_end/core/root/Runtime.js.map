{"version":3,"file":"Runtime.js","sourceRoot":"","sources":["../../../../../../front_end/core/root/Runtime.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nconst originalConsole = console;\nconst originalAssert = console.assert;\n\nconst queryParamsObject = new URLSearchParams(location.search);\n\n// The following variable are initialized all the way at the bottom of this file\nlet importScriptPathPrefix: string;\n\nlet runtimePlatform = '';\n\nlet runtimeInstance: Runtime|undefined;\n\nexport function getRemoteBase(location: string = self.location.toString()): {\n  base: string,\n  version: string,\n}|null {\n  const url = new URL(location);\n  const remoteBase = url.searchParams.get('remoteBase');\n  if (!remoteBase) {\n    return null;\n  }\n\n  const version = /\\/serve_file\\/(@[0-9a-zA-Z]+)\\/?$/.exec(remoteBase);\n  if (!version) {\n    return null;\n  }\n\n  return {base: `${url.origin}/remote/serve_file/${version[1]}/`, version: version[1]};\n}\n\nexport const mappingForLayoutTests = new Map<string, string>([\n  ['panels/animation', 'animation'],\n  ['panels/browser_debugger', 'browser_debugger'],\n  ['panels/changes', 'changes'],\n  ['panels/console', 'console'],\n  ['panels/elements', 'elements'],\n  ['panels/emulation', 'emulation'],\n  ['panels/mobile_throttling', 'mobile_throttling'],\n  ['panels/network', 'network'],\n  ['panels/profiler', 'profiler'],\n  ['panels/application', 'resources'],\n  ['panels/search', 'search'],\n  ['panels/sources', 'sources'],\n  ['panels/snippets', 'snippets'],\n  ['panels/settings', 'settings'],\n  ['panels/timeline', 'timeline'],\n  ['panels/web_audio', 'web_audio'],\n  ['models/persistence', 'persistence'],\n  ['models/workspace_diff', 'workspace_diff'],\n  ['entrypoints/main', 'main'],\n  ['third_party/diff', 'diff'],\n  ['ui/legacy/components/inline_editor', 'inline_editor'],\n  ['ui/legacy/components/data_grid', 'data_grid'],\n  ['ui/legacy/components/perf_ui', 'perf_ui'],\n  ['ui/legacy/components/source_frame', 'source_frame'],\n  ['ui/legacy/components/color_picker', 'color_picker'],\n  ['ui/legacy/components/cookie_table', 'cookie_table'],\n  ['ui/legacy/components/text_editor', 'text_editor'],\n  ['ui/legacy/components/quick_open', 'quick_open'],\n  ['ui/legacy/components/utils', 'components'],\n]);\n\nexport class Runtime {\n  private readonly modules: Module[];\n  modulesMap: {\n    [x: string]: Module,\n  };\n  private readonly descriptorsMap: {\n    [x: string]: ModuleDescriptor,\n  };\n  private constructor(descriptors: ModuleDescriptor[]) {\n    this.modules = [];\n    this.modulesMap = {};\n    this.descriptorsMap = {};\n\n    for (const descriptor of descriptors) {\n      this.registerModule(descriptor);\n    }\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n    moduleDescriptors: Array<ModuleDescriptor>|null,\n  }|undefined = {forceNew: null, moduleDescriptors: null}): Runtime {\n    const {forceNew, moduleDescriptors} = opts;\n    if (!runtimeInstance || forceNew) {\n      if (!moduleDescriptors) {\n        throw new Error(`Unable to create runtime: moduleDescriptors must be provided: ${new Error().stack}`);\n      }\n\n      runtimeInstance = new Runtime(moduleDescriptors);\n    }\n\n    return runtimeInstance;\n  }\n\n  static removeInstance(): void {\n    runtimeInstance = undefined;\n  }\n\n  /**\n   * http://tools.ietf.org/html/rfc3986#section-5.2.4\n   */\n  static normalizePath(path: string): string {\n    if (path.indexOf('..') === -1 && path.indexOf('.') === -1) {\n      return path;\n    }\n\n    const normalizedSegments = [];\n    const segments = path.split('/');\n    for (const segment of segments) {\n      if (segment === '.') {\n        continue;\n      } else if (segment === '..') {\n        normalizedSegments.pop();\n      } else if (segment) {\n        normalizedSegments.push(segment);\n      }\n    }\n    let normalizedPath = normalizedSegments.join('/');\n    if (normalizedPath[normalizedPath.length - 1] === '/') {\n      return normalizedPath;\n    }\n    if (path[0] === '/' && normalizedPath) {\n      normalizedPath = '/' + normalizedPath;\n    }\n    if ((path[path.length - 1] === '/') || (segments[segments.length - 1] === '.') ||\n        (segments[segments.length - 1] === '..')) {\n      normalizedPath = normalizedPath + '/';\n    }\n\n    return normalizedPath;\n  }\n\n  static queryParam(name: string): string|null {\n    return queryParamsObject.get(name);\n  }\n\n  static experimentsSetting(): {\n    [x: string]: boolean,\n  } {\n    try {\n      return JSON.parse(\n                 self.localStorage && self.localStorage['experiments'] ? self.localStorage['experiments'] : '{}') as {\n        [x: string]: boolean,\n      };\n    } catch (e) {\n      console.error('Failed to parse localStorage[\\'experiments\\']');\n      return {};\n    }\n  }\n\n  static assert(value: boolean|undefined, message: string): void {\n    if (value) {\n      return;\n    }\n    originalAssert.call(originalConsole, value, message + ' ' + new Error().stack);\n  }\n\n  static setPlatform(platform: string): void {\n    runtimePlatform = platform;\n  }\n\n  static platform(): string {\n    return runtimePlatform;\n  }\n\n  static isDescriptorEnabled(descriptor: {\n    experiment: ((string | undefined)|null),\n    condition: ((string | undefined)|null),\n  }): boolean {\n    const activatorExperiment = descriptor['experiment'];\n    if (activatorExperiment === '*') {\n      return true;\n    }\n    if (activatorExperiment && activatorExperiment.startsWith('!') &&\n        experiments.isEnabled(activatorExperiment.substring(1))) {\n      return false;\n    }\n    if (activatorExperiment && !activatorExperiment.startsWith('!') && !experiments.isEnabled(activatorExperiment)) {\n      return false;\n    }\n    const condition = descriptor['condition'];\n    if (condition && !condition.startsWith('!') && !Runtime.queryParam(condition)) {\n      return false;\n    }\n    if (condition && condition.startsWith('!') && Runtime.queryParam(condition.substring(1))) {\n      return false;\n    }\n    return true;\n  }\n\n  static resolveSourceURL(path: string): string {\n    let sourceURL: string = self.location.href;\n    if (self.location.search) {\n      sourceURL = sourceURL.replace(self.location.search, '');\n    }\n    sourceURL = sourceURL.substring(0, sourceURL.lastIndexOf('/') + 1) + path;\n    return '\\n/*# sourceURL=' + sourceURL + ' */';\n  }\n\n  module(moduleName: string): Module {\n    return this.modulesMap[moduleName];\n  }\n\n  private registerModule(descriptor: ModuleDescriptor): void {\n    const module = new Module(this, descriptor);\n    this.modules.push(module);\n    this.modulesMap[descriptor['name']] = module;\n    const mappedName = mappingForLayoutTests.get(descriptor['name']);\n    if (mappedName !== undefined) {\n      this.modulesMap[mappedName] = module;\n    }\n  }\n\n  loadModulePromise(moduleName: string): Promise<boolean> {\n    return this.modulesMap[moduleName].loadPromise();\n  }\n\n  loadAutoStartModules(moduleNames: string[]): Promise<boolean[]> {\n    const promises = [];\n    for (const moduleName of moduleNames) {\n      promises.push(this.loadModulePromise(moduleName));\n    }\n    return Promise.all(promises);\n  }\n\n  getModulesMap(): {[x: string]: Module} {\n    return this.modulesMap;\n  }\n}\n\nexport class ModuleDescriptor {\n  name!: string;\n  dependencies!: string[]|undefined;\n  modules!: string[];\n  resources!: string[];\n  condition!: string|undefined;\n  experiment!: string|null;\n  constructor() {\n  }\n}\nexport interface Option {\n  title: string;\n  value: string|boolean;\n  raw?: boolean;\n  text?: string;\n}\n\nfunction computeContainingFolderName(name: string): string {\n  if (name.includes('/')) {\n    return name.substring(name.lastIndexOf('/') + 1, name.length);\n  }\n  return name;\n}\n\nexport class Module {\n  private readonly manager: Runtime;\n  readonly descriptor: ModuleDescriptor;\n  private readonly nameInternal: string;\n  private loadedForTest: boolean;\n  private pendingLoadPromise?: Promise<boolean>;\n  constructor(manager: Runtime, descriptor: ModuleDescriptor) {\n    this.manager = manager;\n    this.descriptor = descriptor;\n    this.nameInternal = descriptor.name;\n    this.loadedForTest = false;\n  }\n\n  name(): string {\n    return this.nameInternal;\n  }\n\n  enabled(): boolean {\n    return Runtime.isDescriptorEnabled(this.descriptor);\n  }\n\n  resource(name: string): string {\n    const fullName = this.nameInternal + '/' + name;\n    const content = cachedResources.get(fullName);\n    if (!content) {\n      throw new Error(fullName + ' not preloaded. Check module.json');\n    }\n    return content;\n  }\n\n  loadPromise(): Promise<boolean> {\n    if (!this.enabled()) {\n      return Promise.reject(new Error('Module ' + this.nameInternal + ' is not enabled'));\n    }\n\n    if (this.pendingLoadPromise) {\n      return this.pendingLoadPromise;\n    }\n\n    const dependencies = this.descriptor.dependencies;\n    const dependencyPromises = [];\n    for (let i = 0; dependencies && i < dependencies.length; ++i) {\n      dependencyPromises.push(this.manager.getModulesMap()[dependencies[i]].loadPromise());\n    }\n\n    this.pendingLoadPromise = Promise.all(dependencyPromises).then(this.loadModules.bind(this)).then(() => {\n      this.loadedForTest = true;\n      return this.loadedForTest;\n    });\n\n    return this.pendingLoadPromise;\n  }\n\n  private async loadModules(): Promise<void> {\n    const containingFolderName = computeContainingFolderName(this.nameInternal);\n\n    const moduleFileName = `${containingFolderName}_module.js`;\n    const entrypointFileName = `${containingFolderName}.js`;\n\n    // If a module has resources, they are part of the `_module.js` files that are generated\n    // by `build_release_applications`. These need to be loaded before any other code is\n    // loaded, to make sure that the resource content is properly cached in `cachedResources`.\n    if (this.descriptor.modules && this.descriptor.modules.includes(moduleFileName)) {\n      await import(`../../${this.nameInternal}/${moduleFileName}`);\n    }\n\n    await import(`../../${this.nameInternal}/${entrypointFileName}`);\n  }\n\n  private modularizeURL(resourceName: string): string {\n    return Runtime.normalizePath(this.nameInternal + '/' + resourceName);\n  }\n\n  fetchResource(resourceName: string): Promise<string> {\n    const sourceURL = getResourceURL(this.modularizeURL(resourceName));\n    return loadResourcePromise(sourceURL);\n  }\n\n  substituteURL(value: string): string {\n    return value.replace(/@url\\(([^\\)]*?)\\)/g, convertURL.bind(this));\n\n    function convertURL(this: Module, match: string, url: string): string {\n      return importScriptPathPrefix + this.modularizeURL(url);\n    }\n  }\n}\n\nexport class ExperimentsSupport {\n  private experiments: Experiment[];\n  private experimentNames: Set<string>;\n  private enabledTransiently: Set<string>;\n  private readonly enabledByDefault: Set<string>;\n  private readonly serverEnabled: Set<string>;\n  constructor() {\n    this.experiments = [];\n    this.experimentNames = new Set();\n    this.enabledTransiently = new Set();\n    this.enabledByDefault = new Set();\n    this.serverEnabled = new Set();\n  }\n\n  allConfigurableExperiments(): Experiment[] {\n    const result = [];\n    for (const experiment of this.experiments) {\n      if (!this.enabledTransiently.has(experiment.name)) {\n        result.push(experiment);\n      }\n    }\n    return result;\n  }\n\n  enabledExperiments(): Experiment[] {\n    return this.experiments.filter(experiment => experiment.isEnabled());\n  }\n\n  private setExperimentsSetting(value: Object): void {\n    if (!self.localStorage) {\n      return;\n    }\n    self.localStorage['experiments'] = JSON.stringify(value);\n  }\n\n  register(experimentName: string, experimentTitle: string, unstable?: boolean, docLink?: string): void {\n    Runtime.assert(!this.experimentNames.has(experimentName), 'Duplicate registration of experiment ' + experimentName);\n    this.experimentNames.add(experimentName);\n    this.experiments.push(new Experiment(this, experimentName, experimentTitle, Boolean(unstable), docLink ?? ''));\n  }\n\n  isEnabled(experimentName: string): boolean {\n    this.checkExperiment(experimentName);\n    // Check for explicitly disabled experiments first - the code could call setEnable(false) on the experiment enabled\n    // by default and we should respect that.\n    if (Runtime.experimentsSetting()[experimentName] === false) {\n      return false;\n    }\n    if (this.enabledTransiently.has(experimentName) || this.enabledByDefault.has(experimentName)) {\n      return true;\n    }\n    if (this.serverEnabled.has(experimentName)) {\n      return true;\n    }\n\n    return Boolean(Runtime.experimentsSetting()[experimentName]);\n  }\n\n  setEnabled(experimentName: string, enabled: boolean): void {\n    this.checkExperiment(experimentName);\n    const experimentsSetting = Runtime.experimentsSetting();\n    experimentsSetting[experimentName] = enabled;\n    this.setExperimentsSetting(experimentsSetting);\n  }\n\n  enableExperimentsTransiently(experimentNames: string[]): void {\n    for (const experimentName of experimentNames) {\n      this.checkExperiment(experimentName);\n      this.enabledTransiently.add(experimentName);\n    }\n  }\n\n  enableExperimentsByDefault(experimentNames: string[]): void {\n    for (const experimentName of experimentNames) {\n      this.checkExperiment(experimentName);\n      this.enabledByDefault.add(experimentName);\n    }\n  }\n\n  setServerEnabledExperiments(experimentNames: string[]): void {\n    for (const experiment of experimentNames) {\n      this.checkExperiment(experiment);\n      this.serverEnabled.add(experiment);\n    }\n  }\n\n  enableForTest(experimentName: string): void {\n    this.checkExperiment(experimentName);\n    this.enabledTransiently.add(experimentName);\n  }\n\n  clearForTest(): void {\n    this.experiments = [];\n    this.experimentNames.clear();\n    this.enabledTransiently.clear();\n    this.enabledByDefault.clear();\n    this.serverEnabled.clear();\n  }\n\n  cleanUpStaleExperiments(): void {\n    const experimentsSetting = Runtime.experimentsSetting();\n    const cleanedUpExperimentSetting: {\n      [x: string]: boolean,\n    } = {};\n    for (const {name: experimentName} of this.experiments) {\n      if (experimentsSetting.hasOwnProperty(experimentName)) {\n        const isEnabled = experimentsSetting[experimentName];\n        if (isEnabled || this.enabledByDefault.has(experimentName)) {\n          cleanedUpExperimentSetting[experimentName] = isEnabled;\n        }\n      }\n    }\n    this.setExperimentsSetting(cleanedUpExperimentSetting);\n  }\n\n  private checkExperiment(experimentName: string): void {\n    Runtime.assert(this.experimentNames.has(experimentName), 'Unknown experiment ' + experimentName);\n  }\n}\n\nexport class Experiment {\n  name: string;\n  title: string;\n  unstable: boolean;\n  docLink?: string;\n  private readonly experiments: ExperimentsSupport;\n  constructor(experiments: ExperimentsSupport, name: string, title: string, unstable: boolean, docLink: string) {\n    this.name = name;\n    this.title = title;\n    this.unstable = unstable;\n    this.docLink = docLink;\n    this.experiments = experiments;\n  }\n\n  isEnabled(): boolean {\n    return this.experiments.isEnabled(this.name);\n  }\n\n  setEnabled(enabled: boolean): void {\n    this.experiments.setEnabled(this.name, enabled);\n  }\n}\n\nexport function loadResourcePromise(url: string): Promise<string> {\n  return new Promise<string>(load);\n\n  function load(fulfill: (arg0: string) => void, reject: (arg0: Error) => void): void {\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.onreadystatechange = onreadystatechange;\n\n    function onreadystatechange(this: XMLHttpRequest, _e: Event): void {\n      if (xhr.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n\n      const response: string = this.response;\n\n      // DevTools Proxy server can mask 404s as 200s, check the body to be sure\n      const status = /^HTTP\\/1.1 404/.test(response) ? 404 : xhr.status;\n\n      if ([0, 200, 304].indexOf(status) === -1)  // Testing harness file:/// results in 0.\n      {\n        reject(new Error('While loading from url ' + url + ' server responded with a status of ' + status));\n      } else {\n        fulfill(response);\n      }\n    }\n    xhr.send(null);\n  }\n}\n\nfunction getResourceURL(scriptName: string, base?: string): string {\n  const sourceURL = (base || importScriptPathPrefix) + scriptName;\n  const schemaIndex = sourceURL.indexOf('://') + 3;\n  let pathIndex = sourceURL.indexOf('/', schemaIndex);\n  if (pathIndex === -1) {\n    pathIndex = sourceURL.length;\n  }\n  return sourceURL.substring(0, pathIndex) + Runtime.normalizePath(sourceURL.substring(pathIndex));\n}\n\n(function(): void {\nconst baseUrl = self.location ? self.location.origin + self.location.pathname : '';\nimportScriptPathPrefix = baseUrl.substring(0, baseUrl.lastIndexOf('/') + 1);\n})();\n\n// This must be constructed after the query parameters have been parsed.\nexport const experiments = new ExperimentsSupport();\n\nexport const cachedResources = new Map<string, string>();\n\n// Only exported for LightHouse, which uses it in `report-generator.js`.\n// Do not use this global in DevTools' implementation.\n// TODO(crbug.com/1127292): remove this global\n// @ts-ignore\nglobalThis.EXPORTED_CACHED_RESOURCES_ONLY_FOR_LIGHTHOUSE = cachedResources;\n\nexport let appStartedPromiseCallback: () => void;\nexport const appStarted = new Promise<void>(fulfill => {\n  appStartedPromiseCallback = fulfill;\n});\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum ExperimentName {\n  CAPTURE_NODE_CREATION_STACKS = 'captureNodeCreationStacks',\n  CSS_OVERVIEW = 'cssOverview',\n  LIVE_HEAP_PROFILE = 'liveHeapProfile',\n  DEVELOPER_RESOURCES_VIEW = 'developerResourcesView',\n  TIMELINE_REPLAY_EVENT = 'timelineReplayEvent',\n  CSP_VIOLATIONS_VIEW = 'cspViolationsView',\n  WASM_DWARF_DEBUGGING = 'wasmDWARFDebugging',\n  ALL = '*',\n  PROTOCOL_MONITOR = 'protocolMonitor',\n  WEBAUTHN_PANE = 'webauthnPane',\n  LOCALIZED_DEVTOOLS = 'localizedDevTools',\n}\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum ConditionName {\n  CAN_DOCK = 'can_dock',\n  NOT_SOURCES_HIDE_ADD_FOLDER = '!sources.hide_add_folder',\n}\n"]}