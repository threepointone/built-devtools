{"version":3,"file":"FilteredListWidget.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/quick_open/FilteredListWidget.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration)\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as TextUtils from '../../../../models/text_utils/text_utils.js';\nimport * as Diff from '../../../../third_party/diff/diff.js';\nimport * as UI from '../../legacy.js';\n\nconst UIStrings = {\n  /**\n  * @description Aria label for quick open dialog prompt\n  */\n  quickOpenPrompt: 'Quick open prompt',\n  /**\n  * @description Title of quick open dialog\n  */\n  quickOpen: 'Quick open',\n  /**\n  * @description Text to show no results have been found\n  */\n  noResultsFound: 'No results found',\n};\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/quick_open/FilteredListWidget.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class FilteredListWidget extends UI.Widget.VBox implements UI.ListControl.ListDelegate<number> {\n  private promptHistory: string[];\n  private scoringTimer: number;\n  private filterTimer: number;\n  private loadTimeout: number;\n  private refreshListWithCurrentResult!: (() => void)|undefined;\n  private dialog!: UI.Dialog.Dialog|undefined;\n  private query!: string|undefined;\n  private readonly promptElement: HTMLElement;\n  private readonly prompt: UI.TextPrompt.TextPrompt;\n  private readonly bottomElementsContainer: HTMLElement;\n  private readonly progressElement: HTMLElement;\n  private progressBarElement: HTMLElement;\n  private readonly items: UI.ListModel.ListModel<number>;\n  private list: UI.ListControl.ListControl<number>;\n  private readonly itemElementsContainer: HTMLDivElement;\n  private notFoundElement: HTMLElement;\n  private prefix: string;\n  private provider: Provider|null;\n  private readonly queryChangedCallback?: (arg0: string) => void;\n\n  constructor(provider: Provider|null, promptHistory?: string[], queryChangedCallback?: ((arg0: string) => void)) {\n    super(true);\n    this.promptHistory = promptHistory || [];\n\n    this.scoringTimer = 0;\n    this.filterTimer = 0;\n    this.loadTimeout = 0;\n\n    this.contentElement.classList.add('filtered-list-widget');\n    const listener = (this.onKeyDown.bind(this) as (arg0: Event) => void);\n    this.contentElement.addEventListener('keydown', listener, true);\n    UI.ARIAUtils.markAsCombobox(this.contentElement);\n    this.registerRequiredCSS('ui/legacy/components/quick_open/filteredListWidget.css');\n\n    this.promptElement = this.contentElement.createChild('div', 'filtered-list-widget-input');\n    UI.ARIAUtils.setAccessibleName(this.promptElement, i18nString(UIStrings.quickOpenPrompt));\n    this.promptElement.setAttribute('spellcheck', 'false');\n    this.promptElement.setAttribute('contenteditable', 'plaintext-only');\n    this.prompt = new UI.TextPrompt.TextPrompt();\n    this.prompt.initialize(() => Promise.resolve([]));\n    const promptProxy = this.prompt.attach(this.promptElement);\n    promptProxy.addEventListener('input', this.onInput.bind(this), false);\n    promptProxy.classList.add('filtered-list-widget-prompt-element');\n\n    this.bottomElementsContainer = this.contentElement.createChild('div', 'vbox');\n    this.progressElement = this.bottomElementsContainer.createChild('div', 'filtered-list-widget-progress');\n    this.progressBarElement = this.progressElement.createChild('div', 'filtered-list-widget-progress-bar');\n\n    this.items = new UI.ListModel.ListModel();\n    this.list = new UI.ListControl.ListControl(this.items, this, UI.ListControl.ListMode.EqualHeightItems);\n    this.itemElementsContainer = this.list.element;\n    this.itemElementsContainer.classList.add('container');\n    this.bottomElementsContainer.appendChild(this.itemElementsContainer);\n    this.itemElementsContainer.addEventListener('click', this.onClick.bind(this), false);\n    UI.ARIAUtils.markAsListBox(this.itemElementsContainer);\n    UI.ARIAUtils.setControls(this.promptElement, this.itemElementsContainer);\n    UI.ARIAUtils.setAutocomplete(this.promptElement, UI.ARIAUtils.AutocompleteInteractionModel.list);\n\n    this.notFoundElement = this.bottomElementsContainer.createChild('div', 'not-found-text');\n    this.notFoundElement.classList.add('hidden');\n\n    this.setDefaultFocusedElement(this.promptElement);\n\n    this.prefix = '';\n    this.provider = provider;\n    this.queryChangedCallback = queryChangedCallback;\n  }\n\n  static highlightRanges(element: Element, query: string, caseInsensitive?: boolean): boolean {\n    if (!query) {\n      return false;\n    }\n\n    function rangesForMatch(text: string, query: string): TextUtils.TextRange.SourceRange[]|null {\n      const opcodes = Diff.Diff.DiffWrapper.charDiff(query, text);\n      let offset = 0;\n      const ranges = [];\n      for (let i = 0; i < opcodes.length; ++i) {\n        const opcode = opcodes[i];\n        if (opcode[0] === Diff.Diff.Operation.Equal) {\n          ranges.push(new TextUtils.TextRange.SourceRange(offset, opcode[1].length));\n        } else if (opcode[0] !== Diff.Diff.Operation.Insert) {\n          return null;\n        }\n        offset += opcode[1].length;\n      }\n      return ranges;\n    }\n\n    if (element.textContent === null) {\n      return false;\n    }\n    const text = element.textContent;\n    let ranges = rangesForMatch(text, query);\n    if (!ranges || caseInsensitive) {\n      ranges = rangesForMatch(text.toUpperCase(), query.toUpperCase());\n    }\n    if (ranges) {\n      UI.UIUtils.highlightRangesWithStyleClass(element, ranges, 'highlight');\n      return true;\n    }\n    return false;\n  }\n\n  setPlaceholder(placeholder: string, ariaPlaceholder?: string): void {\n    this.prompt.setPlaceholder(placeholder, ariaPlaceholder);\n  }\n\n  /**\n   * Sets the text prompt's accessible title. By default, it is \"Quick open prompt\".\n   */\n  setPromptTitle(title: string): void {\n    UI.ARIAUtils.setAccessibleName(this.promptElement, title);\n  }\n\n  showAsDialog(dialogTitle?: string): void {\n    if (!dialogTitle) {\n      dialogTitle = i18nString(UIStrings.quickOpen);\n    }\n\n    this.dialog = new UI.Dialog.Dialog();\n    UI.ARIAUtils.setAccessibleName(this.dialog.contentElement, dialogTitle);\n    this.dialog.setMaxContentSize(new UI.Geometry.Size(504, 340));\n    this.dialog.setSizeBehavior(UI.GlassPane.SizeBehavior.SetExactWidthMaxHeight);\n    this.dialog.setContentPosition(null, 22);\n    this.show(this.dialog.contentElement);\n    UI.ARIAUtils.setExpanded(this.contentElement, true);\n    this.dialog.once('hidden').then(() => {\n      this.dispatchEventToListeners('hidden');\n    });\n    // @ts-ignore\n    this.dialog.show();\n  }\n\n  setPrefix(prefix: string): void {\n    this.prefix = prefix;\n  }\n\n  setProvider(provider: Provider|null): void {\n    if (provider === this.provider) {\n      return;\n    }\n\n    if (this.provider) {\n      this.provider.detach();\n    }\n    this.clearTimers();\n\n    this.provider = provider;\n    if (this.isShowing()) {\n      this.attachProvider();\n    }\n  }\n\n  setQuerySelectedRange(startIndex: number, endIndex: number): void {\n    this.prompt.setSelectedRange(startIndex, endIndex);\n  }\n\n  private attachProvider(): void {\n    this.items.replaceAll([]);\n    this.list.invalidateItemHeight();\n    if (this.provider) {\n      this.provider.setRefreshCallback(this.itemsLoaded.bind(this, this.provider));\n      this.provider.attach();\n    }\n    this.itemsLoaded(this.provider);\n  }\n\n  private value(): string {\n    return this.prompt.text().trim();\n  }\n\n  private cleanValue(): string {\n    return this.value().substring(this.prefix.length);\n  }\n\n  wasShown(): void {\n    this.attachProvider();\n  }\n\n  willHide(): void {\n    if (this.provider) {\n      this.provider.detach();\n    }\n    this.clearTimers();\n    UI.ARIAUtils.setExpanded(this.contentElement, false);\n  }\n\n  private clearTimers(): void {\n    clearTimeout(this.filterTimer);\n    clearTimeout(this.scoringTimer);\n    clearTimeout(this.loadTimeout);\n    this.filterTimer = 0;\n    this.scoringTimer = 0;\n    this.loadTimeout = 0;\n    this.refreshListWithCurrentResult = undefined;\n  }\n\n  private onEnter(_event: Event): void {\n    if (!this.provider) {\n      return;\n    }\n    const selectedIndexInProvider = this.provider.itemCount() ? this.list.selectedItem() : null;\n\n    this.selectItem(selectedIndexInProvider);\n    if (this.dialog) {\n      this.dialog.hide();\n    }\n  }\n\n  private itemsLoaded(provider: Provider|null): void {\n    if (this.loadTimeout || provider !== this.provider) {\n      return;\n    }\n    this.loadTimeout = window.setTimeout(this.updateAfterItemsLoaded.bind(this), 0);\n  }\n\n  private updateAfterItemsLoaded(): void {\n    this.loadTimeout = 0;\n    this.filterItems();\n  }\n\n  createElementForItem(item: number): Element {\n    const itemElement = document.createElement('div');\n    const renderAsTwoRows = this.provider && this.provider.renderAsTwoRows();\n    itemElement.className = 'filtered-list-widget-item ' + (renderAsTwoRows ? 'two-rows' : 'one-row');\n    const titleElement = itemElement.createChild('div', 'filtered-list-widget-title');\n    const subtitleElement = itemElement.createChild('div', 'filtered-list-widget-subtitle');\n    subtitleElement.textContent = '\\u200B';\n    if (this.provider) {\n      this.provider.renderItem(item, this.cleanValue(), titleElement, subtitleElement);\n    }\n    UI.ARIAUtils.markAsOption(itemElement);\n    return itemElement;\n  }\n\n  heightForItem(_item: number): number {\n    // Let the list measure items for us.\n    return 0;\n  }\n\n  isItemSelectable(_item: number): boolean {\n    return true;\n  }\n\n  selectedItemChanged(_from: number|null, _to: number|null, fromElement: Element|null, toElement: Element|null): void {\n    if (fromElement) {\n      fromElement.classList.remove('selected');\n    }\n    if (toElement) {\n      toElement.classList.add('selected');\n    }\n    UI.ARIAUtils.setActiveDescendant(this.promptElement, toElement);\n  }\n\n  private onClick(event: Event): void {\n    const item = this.list.itemForNode((event.target as Node | null));\n    if (item === null) {\n      return;\n    }\n\n    event.consume(true);\n    this.selectItem(item);\n    if (this.dialog) {\n      this.dialog.hide();\n    }\n  }\n\n  setQuery(query: string): void {\n    this.prompt.focus();\n    this.prompt.setText(query);\n    this.queryChanged();\n    this.prompt.autoCompleteSoon(true);\n    this.scheduleFilter();\n  }\n\n  private tabKeyPressed(): boolean {\n    const userEnteredText = this.prompt.text();\n    let completion;\n    for (let i = this.promptHistory.length - 1; i >= 0; i--) {\n      if (this.promptHistory[i] !== userEnteredText && this.promptHistory[i].startsWith(userEnteredText)) {\n        completion = this.promptHistory[i];\n        break;\n      }\n    }\n    if (!completion) {\n      return false;\n    }\n    this.prompt.focus();\n    this.prompt.setText(completion);\n    this.prompt.setDOMSelection(userEnteredText.length, completion.length);\n    this.scheduleFilter();\n    return true;\n  }\n\n  private itemsFilteredForTest(): void {\n    // Sniffed in tests.\n  }\n\n  private filterItems(): void {\n    this.filterTimer = 0;\n    if (this.scoringTimer) {\n      clearTimeout(this.scoringTimer);\n      this.scoringTimer = 0;\n\n      if (this.refreshListWithCurrentResult) {\n        this.refreshListWithCurrentResult();\n      }\n    }\n\n    if (!this.provider) {\n      this.bottomElementsContainer.classList.toggle('hidden', true);\n      this.itemsFilteredForTest();\n      return;\n    }\n\n    this.bottomElementsContainer.classList.toggle('hidden', false);\n\n    this.progressBarElement.style.transform = 'scaleX(0)';\n    this.progressBarElement.classList.remove('filtered-widget-progress-fade', 'hidden');\n\n    const query = this.provider.rewriteQuery(this.cleanValue());\n    this.query = query;\n\n    const filterRegex = query ? Platform.StringUtilities.filterRegex(query) : null;\n\n    const filteredItems: number[] = [];\n\n    const bestScores: number[] = [];\n    const bestItems: number[] = [];\n    const bestItemsToCollect = 100;\n    let minBestScore = 0;\n    const overflowItems: number[] = [];\n    const scoreStartTime = window.performance.now();\n\n    const maxWorkItems = Platform.NumberUtilities.clamp(10, 500, (this.provider.itemCount() / 10) | 0);\n\n    scoreItems.call(this, 0);\n\n    function compareIntegers(a: number, b: number): number {\n      return b - a;\n    }\n\n    function scoreItems(this: FilteredListWidget, fromIndex: number): void {\n      if (!this.provider) {\n        return;\n      }\n      this.scoringTimer = 0;\n      let workDone = 0;\n      let i;\n\n      for (i = fromIndex; i < this.provider.itemCount() && workDone < maxWorkItems; ++i) {\n        // Filter out non-matching items quickly.\n        if (filterRegex && !filterRegex.test(this.provider.itemKeyAt(i))) {\n          continue;\n        }\n\n        // Score item.\n        const score = this.provider.itemScoreAt(i, query);\n        if (query) {\n          workDone++;\n        }\n\n        // Find its index in the scores array (earlier elements have bigger scores).\n        if (score > minBestScore || bestScores.length < bestItemsToCollect) {\n          const index = Platform.ArrayUtilities.upperBound(bestScores, score, compareIntegers);\n          bestScores.splice(index, 0, score);\n          bestItems.splice(index, 0, i);\n          if (bestScores.length > bestItemsToCollect) {\n            // Best list is too large -> drop last elements.\n            const bestItemLast = bestItems[bestItems.length - 1];\n            if (bestItemLast) {\n              overflowItems.push(bestItemLast);\n            }\n            bestScores.length = bestItemsToCollect;\n            bestItems.length = bestItemsToCollect;\n          }\n          const bestScoreLast = bestScores[bestScores.length - 1];\n          if (bestScoreLast) {\n            minBestScore = bestScoreLast;\n          }\n        } else {\n          filteredItems.push(i);\n        }\n      }\n\n      this.refreshListWithCurrentResult = this.refreshList.bind(this, bestItems, overflowItems, filteredItems);\n\n      // Process everything in chunks.\n      if (i < this.provider.itemCount()) {\n        this.scoringTimer = window.setTimeout(scoreItems.bind(this, i), 0);\n        if (window.performance.now() - scoreStartTime > 50) {\n          this.progressBarElement.style.transform = 'scaleX(' + i / this.provider.itemCount() + ')';\n        }\n        return;\n      }\n      if (window.performance.now() - scoreStartTime > 100) {\n        this.progressBarElement.style.transform = 'scaleX(1)';\n        this.progressBarElement.classList.add('filtered-widget-progress-fade');\n      } else {\n        this.progressBarElement.classList.add('hidden');\n      }\n      this.refreshListWithCurrentResult();\n    }\n  }\n\n  private refreshList(bestItems: number[], overflowItems: number[], filteredItems: number[]): void {\n    this.refreshListWithCurrentResult = undefined;\n    filteredItems = [...bestItems, ...overflowItems, ...filteredItems];\n    this.updateNotFoundMessage(Boolean(filteredItems.length));\n    const oldHeight = this.list.element.offsetHeight;\n    this.items.replaceAll(filteredItems);\n    if (filteredItems.length) {\n      this.list.selectItem(filteredItems[0]);\n    }\n    if (this.list.element.offsetHeight !== oldHeight) {\n      this.list.viewportResized();\n    }\n    this.itemsFilteredForTest();\n  }\n\n  private updateNotFoundMessage(hasItems: boolean): void {\n    this.list.element.classList.toggle('hidden', !hasItems);\n    this.notFoundElement.classList.toggle('hidden', hasItems);\n    if (!hasItems && this.provider) {\n      this.notFoundElement.textContent = this.provider.notFoundText(this.cleanValue());\n      UI.ARIAUtils.alert(this.notFoundElement.textContent);\n    }\n  }\n\n  private onInput(): void {\n    this.queryChanged();\n    this.scheduleFilter();\n  }\n\n  private queryChanged(): void {\n    if (this.queryChangedCallback) {\n      this.queryChangedCallback(this.value());\n    }\n    if (this.provider) {\n      this.provider.queryChanged(this.cleanValue());\n    }\n  }\n\n  updateSelectedItemARIA(_fromElement: Element|null, _toElement: Element|null): boolean {\n    return false;\n  }\n\n  private onKeyDown(keyboardEvent: KeyboardEvent): void {\n    let handled = false;\n    switch (keyboardEvent.key) {\n      case 'Enter':\n        this.onEnter(keyboardEvent);\n        return;\n      case 'Tab':\n        handled = this.tabKeyPressed();\n        break;\n      case 'ArrowUp':\n        handled = this.list.selectPreviousItem(true, false);\n        break;\n      case 'ArrowDown':\n        handled = this.list.selectNextItem(true, false);\n        break;\n      case 'PageUp':\n        handled = this.list.selectItemPreviousPage(false);\n        break;\n      case 'PageDown':\n        handled = this.list.selectItemNextPage(false);\n        break;\n    }\n    if (handled) {\n      keyboardEvent.consume(true);\n    }\n  }\n\n  private scheduleFilter(): void {\n    if (this.filterTimer) {\n      return;\n    }\n    this.filterTimer = window.setTimeout(this.filterItems.bind(this), 0);\n  }\n\n  private selectItem(itemIndex: number|null): void {\n    this.promptHistory.push(this.value());\n    if (this.promptHistory.length > 100) {\n      this.promptHistory.shift();\n    }\n    if (this.provider) {\n      this.provider.selectItem(itemIndex, this.cleanValue());\n    }\n  }\n}\n\nexport class Provider {\n  private refreshCallback!: () => void;\n  constructor() {\n  }\n\n  setRefreshCallback(refreshCallback: () => void): void {\n    this.refreshCallback = refreshCallback;\n  }\n\n  attach(): void {\n  }\n\n  itemCount(): number {\n    return 0;\n  }\n\n  itemKeyAt(_itemIndex: number): string {\n    return '';\n  }\n\n  itemScoreAt(_itemIndex: number, _query: string): number {\n    return 1;\n  }\n\n  renderItem(_itemIndex: number, _query: string, _titleElement: Element, _subtitleElement: Element): void {\n  }\n\n  renderAsTwoRows(): boolean {\n    return false;\n  }\n\n  selectItem(_itemIndex: number|null, _promptValue: string): void {\n  }\n\n  refresh(): void {\n    if (this.refreshCallback) {\n      this.refreshCallback();\n    }\n  }\n\n  rewriteQuery(query: string): string {\n    return query;\n  }\n\n  queryChanged(_query: string): void {\n  }\n\n  notFoundText(_query: string): string {\n    return i18nString(UIStrings.noResultsFound);\n  }\n\n  detach(): void {\n  }\n}\n\nconst registeredProviders: ProviderRegistration[] = [];\n\nexport function registerProvider(registration: ProviderRegistration): void {\n  registeredProviders.push(registration);\n}\nexport function getRegisteredProviders(): ProviderRegistration[] {\n  return registeredProviders;\n}\nexport interface ProviderRegistration {\n  provider: () => Promise<Provider>;\n  title?: (() => string);\n  prefix: string;\n}\n"]}