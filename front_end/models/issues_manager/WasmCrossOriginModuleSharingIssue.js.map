{"version":3,"file":"WasmCrossOriginModuleSharingIssue.js","sourceRoot":"","sources":["../../../../../../front_end/models/issues_manager/WasmCrossOriginModuleSharingIssue.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,IAAI,MAAM,yBAAyB,CAAC;AAGhD,OAAO,EAAC,KAAK,EAAE,aAAa,EAAE,SAAS,EAAC,MAAM,YAAY,CAAC;AAG3D,MAAM,SAAS,GAAG;IAChB;;;OAGG;IACH,SAAS,EAAE,gDAAgD;CAC5D,CAAC;AACF,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,4DAA4D,EAAE,SAAS,CAAC,CAAC;AAClH,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAEtE,MAAM,OAAO,iCAAkC,SAC3C,KAA2E;IACrE,YAAY,CAA2D;IAE/E,YACI,YAAsE,EACtE,WAAwC;QAC1C,KAAK,8EAAuE,WAAW,CAAC,CAAC;QACzF,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;IACnC,CAAC;IAED,WAAW;QACT,OAAO,aAAa,CAAC,KAAK,CAAC;IAC7B,CAAC;IAED,OAAO;QACL,OAAO,IAAI,CAAC,YAAY,CAAC;IAC3B,CAAC;IAED,cAAc;QACZ,OAAO;YACL,IAAI,EAAE,iCAAiC;YACvC,KAAK,EAAE,CAAC;oBACN,IAAI,EAAE,kFAAkF;oBACxF,SAAS,EAAE,UAAU,CAAC,SAAS,CAAC,SAAS,CAAC;iBAC3C,CAAC;SACH,CAAC;IACJ,CAAC;IAED,UAAU;QACR,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IAC3C,CAAC;IAED,OAAO;QACL,OAAO,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC;IACtF,CAAC;IAED,MAAM,CAAC,kBAAkB,CAAC,WAAwC,EAAE,cAA8C;QAEhH,MAAM,OAAO,GAAG,cAAc,CAAC,OAAO,CAAC,iCAAiC,CAAC;QACzE,IAAI,CAAC,OAAO,EAAE;YACZ,OAAO,CAAC,IAAI,CAAC,8DAA8D,CAAC,CAAC;YAC7E,OAAO,EAAE,CAAC;SACX;QACD,OAAO,CAAC,IAAI,iCAAiC,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC,CAAC;IACvE,CAAC;CACF","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport type * as SDK from '../../core/sdk/sdk.js';\nimport {Issue, IssueCategory, IssueKind} from './Issue.js';\nimport type {MarkdownIssueDescription} from './MarkdownIssueDescription.js';\n\nconst UIStrings = {\n  /**\n   * @description Label for the link in the description of Wasm cross-origin module sharing issues, that is, issues\n   * that are related to the upcoming deprecation of cross-origin sharing of Wasm modules.\n   */\n  linkTitle: 'Restricting Wasm module sharing to same-origin',\n};\nconst str_ = i18n.i18n.registerUIStrings('models/issues_manager/WasmCrossOriginModuleSharingIssue.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class WasmCrossOriginModuleSharingIssue extends\n    Issue<Protocol.Audits.InspectorIssueCode.WasmCrossOriginModuleSharingIssue> {\n  private issueDetails: Protocol.Audits.WasmCrossOriginModuleSharingIssueDetails;\n\n  constructor(\n      issueDetails: Protocol.Audits.WasmCrossOriginModuleSharingIssueDetails,\n      issuesModel: SDK.IssuesModel.IssuesModel) {\n    super(Protocol.Audits.InspectorIssueCode.WasmCrossOriginModuleSharingIssue, issuesModel);\n    this.issueDetails = issueDetails;\n  }\n\n  getCategory(): IssueCategory {\n    return IssueCategory.Other;\n  }\n\n  details(): Protocol.Audits.WasmCrossOriginModuleSharingIssueDetails {\n    return this.issueDetails;\n  }\n\n  getDescription(): MarkdownIssueDescription|null {\n    return {\n      file: 'wasmCrossOriginModuleSharing.md',\n      links: [{\n        link: 'https://developer.chrome.com/blog/wasm-module-sharing-restricted-to-same-origin/',\n        linkTitle: i18nString(UIStrings.linkTitle),\n      }],\n    };\n  }\n\n  primaryKey(): string {\n    return JSON.stringify(this.issueDetails);\n  }\n\n  getKind(): IssueKind {\n    return this.issueDetails.isWarning ? IssueKind.BreakingChange : IssueKind.PageError;\n  }\n\n  static fromInspectorIssue(issuesModel: SDK.IssuesModel.IssuesModel, inspectorIssue: Protocol.Audits.InspectorIssue):\n      WasmCrossOriginModuleSharingIssue[] {\n    const details = inspectorIssue.details.wasmCrossOriginModuleSharingIssue;\n    if (!details) {\n      console.warn('WasmCrossOriginModuleSharing issue without details received.');\n      return [];\n    }\n    return [new WasmCrossOriginModuleSharingIssue(details, issuesModel)];\n  }\n}\n"]}