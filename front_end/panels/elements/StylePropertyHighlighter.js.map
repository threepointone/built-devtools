{"version":3,"file":"StylePropertyHighlighter.js","sourceRoot":"","sources":["../../../../../../front_end/panels/elements/StylePropertyHighlighter.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) 2015 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as SDK from '../../core/sdk/sdk.js';\n\nimport {StylePropertyTreeElement} from './StylePropertyTreeElement.js';\nimport type {StylePropertiesSection, StylesSidebarPane} from './StylesSidebarPane.js';\n\nexport class StylePropertyHighlighter {\n  private readonly styleSidebarPane: StylesSidebarPane;\n  constructor(ssp: StylesSidebarPane) {\n    this.styleSidebarPane = ssp;\n  }\n\n  /**\n   * Expand all shorthands, find the given property, scroll to it and highlight it.\n   */\n  highlightProperty(cssProperty: SDK.CSSProperty.CSSProperty): void {\n    // Expand all shorthands.\n    for (const section of this.styleSidebarPane.allSections()) {\n      for (let treeElement = section.propertiesTreeOutline.firstChild(); treeElement;\n           treeElement = treeElement.nextSibling) {\n        treeElement.onpopulate();\n      }\n    }\n\n    const {treeElement, section} = this.findTreeElementAndSection(treeElement => treeElement.property === cssProperty);\n    if (treeElement) {\n      treeElement.parent && treeElement.parent.expand();\n      this.scrollAndHighlightTreeElement(treeElement);\n      if (section) {\n        section.element.focus();\n      }\n    }\n  }\n\n  /**\n   * Find the first non-overridden property that matches the provided name, scroll to it and highlight it.\n   */\n  findAndHighlightPropertyName(propertyName: string): void {\n    const {treeElement, section} = this.findTreeElementAndSection(\n        treeElement => treeElement.property.name === propertyName && !treeElement.overloaded());\n    if (treeElement) {\n      this.scrollAndHighlightTreeElement(treeElement);\n      if (section) {\n        section.element.focus();\n      }\n    }\n  }\n\n  /**\n   * Traverse the styles pane tree, execute the provided callback for every tree element found, and\n   * return the first tree element and corresponding section for which the callback returns a truthy value.\n   */\n  private findTreeElementAndSection(compareCb: (arg0: StylePropertyTreeElement) => boolean): {\n    treeElement: StylePropertyTreeElement|null,\n    section: StylePropertiesSection|null,\n  } {\n    let result: StylePropertyTreeElement|null = null;\n    let containingSection: StylePropertiesSection|null = null;\n    for (const section of this.styleSidebarPane.allSections()) {\n      let treeElement = section.propertiesTreeOutline.firstChild();\n      while (treeElement && !result && (treeElement instanceof StylePropertyTreeElement)) {\n        if (compareCb(treeElement)) {\n          result = treeElement;\n          break;\n        }\n        treeElement = treeElement.traverseNextTreeElement(false, null, true);\n      }\n      if (result) {\n        containingSection = section;\n        break;\n      }\n    }\n    return {treeElement: result, section: containingSection};\n  }\n\n  private scrollAndHighlightTreeElement(treeElement: StylePropertyTreeElement): void {\n    treeElement.listItemElement.scrollIntoViewIfNeeded();\n    treeElement.listItemElement.animate(\n        [\n          {offset: 0, backgroundColor: 'rgba(255, 255, 0, 0.2)'},\n          {offset: 0.1, backgroundColor: 'rgba(255, 255, 0, 0.7)'},\n          {offset: 1, backgroundColor: 'transparent'},\n        ],\n        {duration: 2000, easing: 'cubic-bezier(0, 0, 0.2, 1)'});\n  }\n}\n"]}