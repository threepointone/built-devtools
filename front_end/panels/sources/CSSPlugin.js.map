{"version":3,"file":"CSSPlugin.js","sourceRoot":"","sources":["../../../../../../front_end/panels/sources/CSSPlugin.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2013 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport type * as Workspace from '../../models/workspace/workspace.js';\nimport * as ColorPicker from '../../ui/legacy/components/color_picker/color_picker.js';\nimport * as InlineEditor from '../../ui/legacy/components/inline_editor/inline_editor.js';\nimport * as SourceFrame from '../../ui/legacy/components/source_frame/source_frame.js';\nimport type * as TextEditor from '../../ui/legacy/components/text_editor/text_editor.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {Plugin} from './Plugin.js';\n\nconst UIStrings = {\n  /**\n  *@description Swatch icon element title in CSSPlugin of the Sources panel\n  */\n  openColorPicker: 'Open color picker.',\n  /**\n  *@description Text to open the cubic bezier editor\n  */\n  openCubicBezierEditor: 'Open cubic bezier editor.',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/CSSPlugin.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class CSSPlugin extends Plugin {\n  private textEditor: SourceFrame.SourcesTextEditor.SourcesTextEditor;\n  private readonly swatchPopoverHelper: InlineEditor.SwatchPopoverHelper.SwatchPopoverHelper;\n  private muteSwatchProcessing: boolean;\n  private hadSwatchChange: boolean;\n  private bezierEditor: InlineEditor.BezierEditor.BezierEditor|null;\n  private editedSwatchTextRange: TextUtils.TextRange.TextRange|null;\n  private spectrum: ColorPicker.Spectrum.Spectrum|null;\n  private currentSwatch: Element|null;\n  private boundHandleKeyDown: ((arg0: Event) => void)|null;\n  constructor(textEditor: SourceFrame.SourcesTextEditor.SourcesTextEditor) {\n    super();\n    this.textEditor = textEditor;\n    this.swatchPopoverHelper = new InlineEditor.SwatchPopoverHelper.SwatchPopoverHelper();\n    this.muteSwatchProcessing = false;\n    this.hadSwatchChange = false;\n    this.bezierEditor = null;\n    this.editedSwatchTextRange = null;\n    this.spectrum = null;\n    this.currentSwatch = null;\n    this.textEditor.configureAutocomplete({\n      suggestionsCallback: this.cssSuggestions.bind(this),\n      isWordChar: this.isWordChar.bind(this),\n      anchorBehavior: undefined,\n      substituteRangeCallback: undefined,\n      tooltipCallback: undefined,\n    });\n    this.textEditor.addEventListener(SourceFrame.SourcesTextEditor.Events.ScrollChanged, this.textEditorScrolled, this);\n    this.textEditor.addEventListener(UI.TextEditor.Events.TextChanged, this.onTextChanged, this);\n    this.updateSwatches(0, this.textEditor.linesCount - 1);\n    this.boundHandleKeyDown = null;\n\n    this.registerShortcuts();\n  }\n\n  static accepts(uiSourceCode: Workspace.UISourceCode.UISourceCode): boolean {\n    return uiSourceCode.contentType().isStyleSheet();\n  }\n\n  private registerShortcuts(): void {\n    this.boundHandleKeyDown =\n        UI.ShortcutRegistry.ShortcutRegistry.instance().addShortcutListener(this.textEditor.element, {\n          'sources.increment-css': this.handleUnitModification.bind(this, 1),\n          'sources.increment-css-by-ten': this.handleUnitModification.bind(this, 10),\n          'sources.decrement-css': this.handleUnitModification.bind(this, -1),\n          'sources.decrement-css-by-ten': this.handleUnitModification.bind(this, -10),\n        });\n  }\n\n  private textEditorScrolled(): void {\n    if (this.swatchPopoverHelper.isShowing()) {\n      this.swatchPopoverHelper.hide(true);\n    }\n  }\n\n  private modifyUnit(unit: string, change: number): string|null {\n    const unitValue = parseInt(unit, 10);\n    if (isNaN(unitValue)) {\n      return null;\n    }\n    const tail = unit.substring((unitValue).toString().length);\n    return Platform.StringUtilities.sprintf('%d%s', unitValue + change, tail);\n  }\n\n  private async handleUnitModification(change: number): Promise<boolean> {\n    const selection = this.textEditor.selection().normalize();\n    let token = this.textEditor.tokenAtTextPosition(selection.startLine, selection.startColumn);\n    if (!token) {\n      if (selection.startColumn > 0) {\n        token = this.textEditor.tokenAtTextPosition(selection.startLine, selection.startColumn - 1);\n      }\n      if (!token) {\n        return false;\n      }\n    }\n    if (token.type !== 'css-number') {\n      return false;\n    }\n\n    const cssUnitRange =\n        new TextUtils.TextRange.TextRange(selection.startLine, token.startColumn, selection.startLine, token.endColumn);\n    const cssUnitText = this.textEditor.text(cssUnitRange);\n    const newUnitText = this.modifyUnit(cssUnitText, change);\n    if (!newUnitText) {\n      return false;\n    }\n    this.textEditor.editRange(cssUnitRange, newUnitText);\n    selection.startColumn = token.startColumn;\n    selection.endColumn = selection.startColumn + newUnitText.length;\n    this.textEditor.setSelection(selection);\n    return true;\n  }\n\n  private updateSwatches(startLine: number, endLine: number): void {\n    const swatches: HTMLElement[] = [];\n    const swatchPositions: TextUtils.TextRange.TextRange[] = [];\n\n    const regexes =\n        [SDK.CSSMetadata.VariableRegex, SDK.CSSMetadata.URLRegex, UI.Geometry.CubicBezier.Regex, Common.Color.Regex];\n    const handlers = new Map<RegExp, (text: string) => HTMLElement | null>();\n    handlers.set(Common.Color.Regex, this.createColorSwatch.bind(this));\n    handlers.set(UI.Geometry.CubicBezier.Regex, this.createBezierSwatch.bind(this));\n\n    for (let lineNumber = startLine; lineNumber <= endLine; lineNumber++) {\n      const line = this.textEditor.line(lineNumber).substring(0, maxSwatchProcessingLength);\n      const results = TextUtils.TextUtils.Utils.splitStringByRegexes(line, regexes);\n      for (let i = 0; i < results.length; i++) {\n        const result = results[i];\n        const handler = handlers.get(regexes[result.regexIndex]);\n        if (result.regexIndex === -1 || !handler) {\n          continue;\n        }\n        const delimiters = /[\\s:;,(){}]/;\n        const positionBefore = result.position - 1;\n        const positionAfter = result.position + result.value.length;\n        if (positionBefore >= 0 && !delimiters.test(line.charAt(positionBefore)) ||\n            positionAfter < line.length && !delimiters.test(line.charAt(positionAfter))) {\n          continue;\n        }\n        const swatch = handler(result.value);\n        if (!swatch) {\n          continue;\n        }\n        swatches.push(swatch);\n        swatchPositions.push(TextUtils.TextRange.TextRange.createFromLocation(lineNumber, result.position));\n      }\n    }\n    this.textEditor.operation(putSwatchesInline.bind(this));\n\n    function putSwatchesInline(this: CSSPlugin): void {\n      const clearRange = new TextUtils.TextRange.TextRange(startLine, 0, endLine, this.textEditor.line(endLine).length);\n      this.textEditor.bookmarks(clearRange, SwatchBookmark).forEach(marker => marker.clear());\n\n      for (let i = 0; i < swatches.length; i++) {\n        const swatch = swatches[i];\n        const swatchPosition = swatchPositions[i];\n        const bookmark =\n            this.textEditor.addBookmark(swatchPosition.startLine, swatchPosition.startColumn, swatch, SwatchBookmark);\n        swatchToBookmark.set(swatch, bookmark);\n      }\n    }\n  }\n\n  private createColorSwatch(text: string): HTMLElement|null {\n    const color = Common.Color.Color.parse(text);\n    if (!color) {\n      return null;\n    }\n    const swatch = new InlineEditor.ColorSwatch.ColorSwatch();\n    swatch.renderColor(color, false, i18nString(UIStrings.openColorPicker));\n    const value = swatch.createChild('span');\n    value.textContent = text;\n    value.setAttribute('hidden', 'true');\n\n    swatch.addEventListener(\n        InlineEditor.ColorSwatch.ClickEvent.eventName, this.swatchIconClicked.bind(this, swatch), false);\n    return swatch;\n  }\n\n  private createBezierSwatch(text: string): InlineEditor.Swatches.BezierSwatch|null {\n    if (!UI.Geometry.CubicBezier.parse(text)) {\n      return null;\n    }\n    const swatch = InlineEditor.Swatches.BezierSwatch.create();\n    swatch.setBezierText(text);\n    UI.Tooltip.Tooltip.install(swatch.iconElement(), i18nString(UIStrings.openCubicBezierEditor));\n    swatch.iconElement().addEventListener('click', this.swatchIconClicked.bind(this, swatch), false);\n    swatch.hideText(true);\n    return swatch;\n  }\n\n  private swatchIconClicked(swatch: Element, event: Event): void {\n    event.consume(true);\n    this.hadSwatchChange = false;\n    this.muteSwatchProcessing = true;\n    const bookmark = swatchToBookmark.get(swatch);\n    if (!bookmark) {\n      return;\n    }\n    const swatchPosition = bookmark.position();\n    if (!swatchPosition) {\n      return;\n    }\n    this.textEditor.setSelection(swatchPosition);\n    this.editedSwatchTextRange = swatchPosition.clone();\n    if (this.editedSwatchTextRange) {\n      this.editedSwatchTextRange.endColumn += (swatch.textContent || '').length;\n    }\n    this.currentSwatch = swatch;\n\n    if (InlineEditor.ColorSwatch.ColorSwatch.isColorSwatch(swatch)) {\n      this.showSpectrum((swatch as InlineEditor.ColorSwatch.ColorSwatch));\n    } else if (swatch instanceof InlineEditor.Swatches.BezierSwatch) {\n      this.showBezierEditor(swatch);\n    }\n  }\n\n  private showSpectrum(swatch: InlineEditor.ColorSwatch.ColorSwatch): void {\n    if (!this.spectrum) {\n      this.spectrum = new ColorPicker.Spectrum.Spectrum();\n      this.spectrum.addEventListener(ColorPicker.Spectrum.Events.SizeChanged, this.spectrumResized, this);\n      this.spectrum.addEventListener(ColorPicker.Spectrum.Events.ColorChanged, this.spectrumChanged, this);\n    }\n    this.spectrum.setColor((swatch.getColor() as Common.Color.Color), swatch.getFormat() || '');\n    this.swatchPopoverHelper.show(this.spectrum, swatch, this.swatchPopoverHidden.bind(this));\n  }\n\n  private spectrumResized(_event: Common.EventTarget.EventTargetEvent): void {\n    this.swatchPopoverHelper.reposition();\n  }\n\n  private spectrumChanged(event: Common.EventTarget.EventTargetEvent): void {\n    const colorString = (event.data as string);\n    const color = Common.Color.Color.parse(colorString);\n    if (!color || !this.currentSwatch) {\n      return;\n    }\n\n    if (InlineEditor.ColorSwatch.ColorSwatch.isColorSwatch(this.currentSwatch)) {\n      const swatch = (this.currentSwatch as InlineEditor.ColorSwatch.ColorSwatch);\n      swatch.renderColor(color);\n    }\n    this.changeSwatchText(colorString);\n  }\n\n  private showBezierEditor(swatch: InlineEditor.Swatches.BezierSwatch): void {\n    const cubicBezier = UI.Geometry.CubicBezier.parse(swatch.bezierText()) ||\n        (UI.Geometry.CubicBezier.parse('linear') as UI.Geometry.CubicBezier);\n    if (!this.bezierEditor) {\n      this.bezierEditor = new InlineEditor.BezierEditor.BezierEditor(cubicBezier);\n      this.bezierEditor.addEventListener(InlineEditor.BezierEditor.Events.BezierChanged, this.bezierChanged, this);\n    } else {\n      this.bezierEditor.setBezier(cubicBezier);\n    }\n    this.swatchPopoverHelper.show(this.bezierEditor, swatch.iconElement(), this.swatchPopoverHidden.bind(this));\n  }\n\n  private bezierChanged(event: Common.EventTarget.EventTargetEvent): void {\n    const bezierString = (event.data as string);\n    if (this.currentSwatch instanceof InlineEditor.Swatches.BezierSwatch) {\n      this.currentSwatch.setBezierText(bezierString);\n    }\n    this.changeSwatchText(bezierString);\n  }\n\n  private changeSwatchText(text: string): void {\n    this.hadSwatchChange = true;\n    const editedRange = (this.editedSwatchTextRange as TextUtils.TextRange.TextRange);\n    this.textEditor.editRange(editedRange, text, '*swatch-text-changed');\n    editedRange.endColumn = editedRange.startColumn + text.length;\n  }\n\n  private swatchPopoverHidden(commitEdit: boolean): void {\n    this.muteSwatchProcessing = false;\n    if (!commitEdit && this.hadSwatchChange) {\n      this.textEditor.undo();\n    }\n  }\n\n  private onTextChanged(event: Common.EventTarget.EventTargetEvent): void {\n    if (!this.muteSwatchProcessing) {\n      this.updateSwatches(event.data.newRange.startLine, event.data.newRange.endLine);\n    }\n  }\n\n  private isWordChar(char: string): boolean {\n    return TextUtils.TextUtils.Utils.isWordChar(char) || char === '.' || char === '-' || char === '$';\n  }\n\n  private cssSuggestions(prefixRange: TextUtils.TextRange.TextRange, _substituteRange: TextUtils.TextRange.TextRange):\n      Promise<UI.SuggestBox.Suggestions>|null {\n    const prefix = this.textEditor.text(prefixRange);\n    if (prefix.startsWith('$')) {\n      return null;\n    }\n\n    const propertyToken = this.backtrackPropertyToken(prefixRange.startLine, prefixRange.startColumn - 1);\n    if (!propertyToken) {\n      return null;\n    }\n\n    const line = this.textEditor.line(prefixRange.startLine);\n    const tokenContent = line.substring(propertyToken.startColumn, propertyToken.endColumn);\n    const propertyValues = SDK.CSSMetadata.cssMetadata().getPropertyValues(tokenContent);\n    return Promise.resolve(propertyValues.filter(value => value.startsWith(prefix)).map(value => {\n      return {\n        text: value,\n        title: undefined,\n        subtitle: undefined,\n        iconType: undefined,\n        priority: undefined,\n        isSecondary: undefined,\n        subtitleRenderer: undefined,\n        selectionRange: undefined,\n        hideGhostText: undefined,\n        iconElement: undefined,\n      };\n    }));\n  }\n\n  private backtrackPropertyToken(lineNumber: number, columnNumber: number): {\n    startColumn: number,\n    endColumn: number,\n    type: string,\n  }|null {\n    const backtrackDepth = 10;\n    let tokenPosition: number = columnNumber;\n    const line = this.textEditor.line(lineNumber);\n    let seenColon = false;\n\n    for (let i = 0; i < backtrackDepth && tokenPosition >= 0; ++i) {\n      const token = this.textEditor.tokenAtTextPosition(lineNumber, tokenPosition);\n      if (!token) {\n        return null;\n      }\n      if (token.type === 'css-property') {\n        return seenColon ? token : null;\n      }\n      if (token.type && !(token.type.indexOf('whitespace') !== -1 || token.type.startsWith('css-comment'))) {\n        return null;\n      }\n\n      if (!token.type && line.substring(token.startColumn, token.endColumn) === ':') {\n        if (!seenColon) {\n          seenColon = true;\n        } else {\n          return null;\n        }\n      }\n      tokenPosition = token.startColumn - 1;\n    }\n    return null;\n  }\n\n  dispose(): void {\n    if (this.swatchPopoverHelper.isShowing()) {\n      this.swatchPopoverHelper.hide(true);\n    }\n    this.textEditor.removeEventListener(\n        SourceFrame.SourcesTextEditor.Events.ScrollChanged, this.textEditorScrolled, this);\n    this.textEditor.removeEventListener(UI.TextEditor.Events.TextChanged, this.onTextChanged, this);\n    this.textEditor.bookmarks(this.textEditor.fullRange(), SwatchBookmark).forEach(marker => marker.clear());\n    this.textEditor.element.removeEventListener('keydown', (this.boundHandleKeyDown as EventListener));\n  }\n}\n\nexport const maxSwatchProcessingLength: number = 300;\n\nexport const SwatchBookmark: symbol = Symbol('swatch');\n\nconst swatchToBookmark = new WeakMap<Element, TextEditor.CodeMirrorTextEditor.TextEditorBookMark>();\n"]}