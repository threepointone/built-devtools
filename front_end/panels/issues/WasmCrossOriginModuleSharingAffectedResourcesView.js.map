{"version":3,"file":"WasmCrossOriginModuleSharingAffectedResourcesView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/issues/WasmCrossOriginModuleSharingAffectedResourcesView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport type * as IssuesManager from '../../models/issues_manager/issues_manager.js';\nimport type * as Protocol from '../../generated/protocol.js';\n\nimport {AffectedResourcesView} from './AffectedResourcesView.js';\n\nimport type {AggregatedIssue} from './IssueAggregator.js';\nimport type {IssueView} from './IssueView.js';\n\nconst UIStrings = {\n  /**\n   * @description Label for number of affected resources indication in issue view. The number designates the number of attempts to transfer a module to cross-origin context.\n   *\n   */\n  nModuleTransfers: '{n, plural, =1 {# module} other {# modules}}',\n  /**\n  *@description Title for a column in an Wasm cross-origin module sharing affected resource view\n  */\n  wasmModuleUrl: 'Wasm Module URL',\n  /**\n   * @description Title for a column in an Wasm cross-origin module sharing affected resource view.\n   * The issue is about a transfer of a module between different origins (see  https://developer.mozilla.org/en-US/docs/Glossary/Origin).\n   * The transfer occurs from a source origin to a target origin.\n   */\n  sourceOrigin: 'Source Origin',\n  /**\n   * @description Title for a column in an Wasm cross-origin module sharing affected resource view.\n   * The issue is about a transfer of a module between different origins (see  https://developer.mozilla.org/en-US/docs/Glossary/Origin).\n   * The transfer occurs from a source origin to a target origin.\n   */\n  targetOrigin: 'Target Origin',\n  /**\n  *@description Title for a column in an Wasm cross-origin module sharing affected resource view\n  */\n  status: 'Status',\n  /**\n  * @description Indicates that the Wasm module transfer was blocked.\n  */\n  blocked: 'blocked',\n  /**\n  * @description Indicated that the Wasm module transfer was not blocked, but only warned about.\n  */\n  warned: 'warning',\n};\nconst str_ =\n    i18n.i18n.registerUIStrings('panels/issues/WasmCrossOriginModuleSharingAffectedResourcesView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class WasmCrossOriginModuleSharingAffectedResourcesView extends AffectedResourcesView {\n  private issue: AggregatedIssue;\n  constructor(parent: IssueView, issue: AggregatedIssue) {\n    super(parent);\n    this.issue = issue;\n  }\n\n  private appendIssues(\n      issues: Iterable<IssuesManager.WasmCrossOriginModuleSharingIssue.WasmCrossOriginModuleSharingIssue>): void {\n    const header = document.createElement('tr');\n    this.appendColumnTitle(header, i18nString(UIStrings.wasmModuleUrl));\n    this.appendColumnTitle(header, i18nString(UIStrings.sourceOrigin));\n    this.appendColumnTitle(header, i18nString(UIStrings.targetOrigin));\n    this.appendColumnTitle(header, i18nString(UIStrings.status));\n\n    this.affectedResources.appendChild(header);\n\n    let count = 0;\n    for (const issue of issues) {\n      this.appendDetails(issue.details());\n      count++;\n    }\n    this.updateAffectedResourceCount(count);\n  }\n\n  protected getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nModuleTransfers, {n: count});\n  }\n\n  private appendDetails(details: Protocol.Audits.WasmCrossOriginModuleSharingIssueDetails): void {\n    const element = document.createElement('tr');\n\n    element.appendChild(this.createIssueDetailCell(details.wasmModuleUrl));\n    element.appendChild(this.createIssueDetailCell(details.sourceOrigin));\n    element.appendChild(this.createIssueDetailCell(details.targetOrigin));\n    element.appendChild(\n        this.createIssueDetailCell(details.isWarning ? i18nString(UIStrings.warned) : i18nString(UIStrings.blocked)));\n\n    this.affectedResources.appendChild(element);\n  }\n\n  update(): void {\n    this.clear();\n    this.appendIssues(this.issue.getWasmCrossOriginModuleSharingIssue());\n  }\n}\n"]}